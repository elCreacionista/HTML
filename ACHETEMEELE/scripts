

const user = new User(/*prompt("Introdueixi el seu nom:", )*/"Pepe");
setStatics();
let statics = setInterval(setStatics, 1000);
let comprovarCosas = setInterval(ComprovarCosas, 100);
let selected = "nothing";

function User(nick) {
	this.nick = nick;
	if (nick == null || nick == "")
		this.nick = "Usuari";
	this.gold = 1000.0;
	this.dinero = 30.0;
}
function setStatics(){
	document.getElementById("name").innerHTML = user.nick;
	document.getElementById("gold").innerHTML = user.gold + " g";
	document.getElementById("dinero").innerHTML = user.dinero + " â‚¬";

}

function ComprovarCosas(){

	if (selected == "Moneda"){
		document.querySelector("#Monedainput").innerHTML = document.querySelector("#MonedaGold").value + " g";
	}
	if (selected == "Dado"){
		document.querySelector("#Dadoinput1").innerHTML = document.querySelector("#DadoGold1").value + " g";
		
		let numerodados = document.querySelector("#DadoGold2").value;
		
		document.querySelector("#Dadoinput2").innerHTML = numerodados;

		
		let seleccion = document.querySelector("#DadoGold3");
		document.querySelector("#Dadoinput3").innerHTML = selection.value;
		seleccion.max = numerodados.value * 6;
	}

}



function AzarGameMenu(){

	if (selected != "Azar" && selected != "Moneda" && selected != "Dado"){

	
		selected = "Azar";
		document.querySelector("#AzarGameMenu").style.display = "flex";
		return;
	}
	else {
		document.querySelector("#AzarGameMenu").style.display = "none";
		selected = "nothing";
	}
}

function comprobarAzarMenu(){
	switch(selected){
		case "Moneda":
			document.querySelector("#MonedaMenu").style.display = "flex";
			document.querySelector("#DadoMenu").style.display = "none";
		break;
		case "Dado":

			document.querySelector("#DadoMenu").style.display = "flex";
			document.querySelector("#MonedaMenu").style.display = "none";
		break;
		case "Azar":
			document.querySelector("#DadoMenu").style.display = "none";
			document.querySelector("#MonedaMenu").style.display = "none";
		break;
	}

}

function MonedaMenu(){
	
	if (selected != "Moneda"){
		AnimacionMostrar(document.querySelector("#MonedaMenu"));
		selected = "Moneda";
		comprobarAzarMenu();
		return;
	}
	else {
		AnimacionEsconder(document.querySelector("#MonedaMenu"));
		selected = "Azar";
		comprobarAzarMenu();
	}

}
function DadoMenu(){
	
	if (selected != "Dado"){
		AnimacionMostrar(document.querySelector("#DadoMenu"));
		selected = "Dado";
		comprobarAzarMenu();
		return;
	}
	else {
		selected = "Azar";
		comprobarAzarMenu();
	}

}

function JugarDado(){
	let jugada = document.querySelector("#DadoGold1").value;
	let dados = document.querySelector("#DadoGold2").value;
	if (user.gold < jugada * dados){
		document.querySelector("#dialogoDado").innerHTML = "No tens suficient gold";
	}else {
		if (Math.random() > .5){

			document.querySelector("#dialogoMoneda").innerHTML = "Has guanyat " + Math.ceil(jugada * .95);
			user.gold += parseInt(jugada * .95);
		} else{
			document.querySelector("#dialogoMoneda").innerHTML = "Has perdut " + jugada;
			user.gold -= jugada;
		}
	}

}



function JugarMoneda(){
	let jugada = document.querySelector("#MonedaGold").value;
	if (user.gold < jugada){
		document.querySelector("#dialogoMoneda").innerHTML = "No tens suficient gold";
	}else {
		if (Math.random() > .5){

			document.querySelector("#dialogoMoneda").innerHTML = "Has guanyat " + Math.ceil(jugada * .95);
			user.gold += parseInt(Math.ceil(jugada * .95));
		} else{
			document.querySelector("#dialogoMoneda").innerHTML = "Has perdut " + jugada;
			user.gold -= jugada;
		}
	}

}


function AnimacionMostrar(domElement){
	height = 0;
	let arrElements = document.querySelectorAll(".hide1");
		for (let i = 0; i < arrElements.length; i++){
			arrElements[i].style.display = "none"
		}
	let interval = setInterval(timer, 5)
	
	function timer(){
		if (height == 60)
			clearInterval(interval);
		else{
			height ++;
			domElement.style.height = height + "%";
			if (height == 30){
			for (let i = 0; i < arrElements.length; i++)
				arrElements[i].style.display = "block"
			}
		}				
	}
}
function AnimacionEsconder(domElement){
	height = 60;
	let arrElements = document.querySelectorAll(".hide1");
		for (let i = 0; i < arrElements.length; i++){
			arrElements[i].style.display = "block"
		}
	let interval = setInterval(timer, 5)
	
	function timer(){
		if (height == 0)
			clearInterval(interval);
		else{
			height --;
			domElement.style.height = height + "%";
			if (height == 30){
			for (let i = 0; i < arrElements.length; i++)
				arrElements[i].style.display = "none"
			}
		}
					
	}

}
